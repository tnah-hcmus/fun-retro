(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},AzrZ:function(e,t,a){var n=a("LboF"),r=a("ettg");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},WJG9:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("i8i4"),c=a.n(o),i=(a("AzrZ"),a("5CWz")),l=a("55Ip"),u=a("Ty5D"),s=a("/MKj"),d=a("J4zp"),m=a.n(d),p=a("469l"),f=a("kKAo"),b=a("tRbT"),h=a("R/WZ"),g=a("w4+p"),y=a.n(g),E=a("Z3vd"),v=a("r9w1"),k=a("hlie"),O=a("hlFM"),j=a("ofer"),w=function(){return r.a.createElement(j.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",r.a.createElement(k.a,{color:"inherit",href:"https://material-ui.com/"},"My Website")," ",(new Date).getFullYear(),".")},x=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),N=function(e){var t=x(),a=Object(n.useState)("#"),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=m()(l,2),s=u[0],d=u[1];Object(n.useEffect)((function(){e.getGoogleUrl().then((function(e){return i(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,onSubmit:function(t){t.preventDefault();var a=t.target.elements.fname.value.trim()+" "+t.target.elements.lname.value.trim(),n=t.target.elements.password.value.trim(),r=t.target.elements.email.value.trim();e.signup({email:r,password:n,name:a},d,e.history)},noValidate:!0},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{autoComplete:"fname",name:"fname",variant:"outlined",required:!0,fullWidth:!0,id:"fName",label:"First Name",autoFocus:!0})),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lname",label:"Last Name",name:"lname",autoComplete:"lname"})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign Up"),r.a.createElement(E.a,{href:c,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With google"),r.a.createElement(E.a,{href:e.facebookUrl,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Facebook"),!!s&&r.a.createElement(j.a,{variant:"body2",color:"error"},s),r.a.createElement(b.a,{container:!0,justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return e.toLogin()},variant:"body2"},"Already have an account? Sign in"))),r.a.createElement(O.a,{mt:5},r.a.createElement(w,null))))},S=a("ZGBi"),T=a("VmPI"),C=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),P=function(e){var t=C(),a=Object(n.useState)("#"),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=m()(l,2),s=u[0],d=u[1];Object(n.useEffect)((function(){e.getGoogleUrl().then((function(e){return i(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target.elements.email.value,n=t.target.elements.password.value;e.login(a,n,d,e.history)}},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(S.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In"),r.a.createElement(E.a,{href:c,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Google"),r.a.createElement(E.a,{href:e.facebookUrl,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Facebook"),!!s&&r.a.createElement(j.a,{variant:"body2",color:"error"},s),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:!0},r.a.createElement(k.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(b.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return e.toSignUp()},variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(O.a,{mt:5},r.a.createElement(w,null))))},I=a("lSNA"),W=a.n(I),L=a("vDqi"),D=a.n(L),B=a("cr+I");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var A,F=function(e,t){return{type:"login",payload:{token:e,name:t}}},q=function(){return D.a.get("/google/url").then((function(e){return e.data})).catch((function(e){console.log(e)}))},U=(A=B.stringify({client_id:"601715547260365",redirect_uri:"https://retro-1712039.herokuapp.com/auth/facebook",scope:"email",response_type:"code",auth_type:"rerequest",display:"popup"}),"https://www.facebook.com/v8.0/dialog/oauth?".concat(A)),R=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),z={startLogin:function(e,t,a,n){return function(r,o){D.a.post("/api/users/login",{email:e,password:t}).then((function(e){var t=e.data,a=t.user,o=t.token;r(F(o,a.name)),n.push("/")})).catch((function(e){console.log(e);var t=e.response&&e.response.data&&e.response.data.error;a(t||e.response.statusText)}))}},startSignUp:function(e,t,a){return function(n,r){D.a.post("/api/users/signup",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){W()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)).then((function(e){var t=e.data,r=t.user,o=t.token;n(F(o,r.name)),a.push("/")})).catch((function(e){var a=e.response&&e.response.data&&e.response.data.error;t(a||e.response.statusText)}))}}},M=Object(s.b)(null,z)(Object(u.g)((function(e){var t=R(),a=Object(n.useState)(!0),o=m()(a,2),c=o[0],l=o[1];return r.a.createElement(b.a,{container:!0,component:"main",className:t.root},r.a.createElement(i.a,null),r.a.createElement(b.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(b.a,{item:!0,xs:12,sm:8,md:5,component:f.a,elevation:6,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(p.a,{className:t.avatar},r.a.createElement(y.a,null)),c?r.a.createElement(P,{facebookUrl:U,history:e.history,login:e.startLogin,getGoogleUrl:q,toSignUp:function(){return l(!1)}}):r.a.createElement(N,{facebookUrl:U,signup:e.startSignUp,history:e.history,getGoogleUrl:q,toLogin:function(){return l(!0)}}))))}))),G=a("+Isj"),H=a("iae6"),J=Object(h.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),K=function(){var e=J();return r.a.createElement("div",null,r.a.createElement(G.a,{className:e.backdrop,open:!0},r.a.createElement(H.a,{color:"inherit"})))},Z={loginThirdParty:function(e,t,a){return function(n,r){D.a.post("/api/users/login".concat(e),{code:t}).then((function(e){var t=e.data,r=t.user,o=t.token;n(F(o,r.name)),a.push("/")})).catch((function(e){console.log(e.response)}))}}},V=Object(s.b)(null,Z)(Object(u.g)((function(e){return Object(n.useEffect)((function(){var t=B.parse(e.location.search),a=e.location.pathname.includes("google")?"Google":"FB";t.error?e.history.push("/"):e.loginThirdParty(a,t.code,e.history)})),r.a.createElement(K,null)}))),Y=a("30+C"),Q=a("oa/T"),X=a("PsDL"),$=a("xMF9"),ee=a.n($),te=a("MPUk"),ae=a.n(te),ne=a("qlJ3"),re=a.n(ne),oe=a("Y0qX"),ce=a.n(oe),ie=a("L+uM"),le=a.n(ie),ue=a("dl/7"),se=a("6yBS"),de=a("edxh"),me=a("LXXt"),pe=a("wd/R"),fe=a.n(pe),be=function(e){return{type:"update_board",payload:{id:e,key:"permission",value:"public"}}},he=function(e){return{type:"update_board",payload:{id:e,key:"permission",value:"private"}}},ge=function(e,t){return{type:"update_board",payload:{id:e,key:"name",value:t}}},ye=function(e,t,a){var n={share:{func:be,key:"permission",value:"public"},protect:{func:he,key:"permission",value:"private"},name:{func:ge,key:"name",value:a}}[t],r=n.key,o=n.value,c=n.func;return function(t,n){var i=n().auth.token;return D.a.post("/api/boards/update",{token:i,id:e,key:r,value:o}).then((function(n){t(c(e,a))})).catch((function(e){return console.log(e)}))}},Ee=a("kfFl"),ve=a("+JwS"),ke=a("EQI2"),Oe=a("++HY"),je=a("yv+Y"),we=function(e){var t=e.openStatus,a=e.handleClose,n=e.ifAccept;return r.a.createElement("div",null,r.a.createElement(Ee.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",style:{color:ue.a[700]}},r.a.createElement(je.a,{id:"alert-dialog-title"},"Bạn thực sự muốn thực hiện hành động này?"),r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{id:"alert-dialog-description"},"Hành động này sẽ xoá vĩnh viễn board của bạn, bạn có chắc là muốn thực hiện nó hay không ?")),r.a.createElement(ve.a,null,r.a.createElement(E.a,{onClick:function(){n(),a()},color:"primary"},"Thực hiện"),r.a.createElement(E.a,{onClick:a,color:"primary",autoFocus:!0},"Hoàn tác"))))},xe=a("pVnL"),Ne=a.n(xe),Se=a("QILm"),Te=a.n(Se),Ce=a("H2TA"),Pe=a("ZPUd"),Ie=a.n(Pe),We=Object(Ce.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,o=Te()(e,["children","classes","onClose"]);return r.a.createElement(je.a,Ne()({disableTypography:!0,className:a.root},o),r.a.createElement(j.a,{variant:"h6"},t),n?r.a.createElement(X.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(Ie.a,null)):null)})),Le=Object(Ce.a)((function(e){return{root:{padding:e.spacing(2)}}}))(ke.a),De=Object(Ce.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(ve.a),Be=function(e){var t=e.openStatus,a=e.handleClose,n=e.content;return r.a.createElement(Ee.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:t},r.a.createElement(We,{id:"customized-dialog-title",onClose:a},"Thông báo"),r.a.createElement(Le,{dividers:!0},r.a.createElement(j.a,{gutterBottom:!0},n)),r.a.createElement(De,null,r.a.createElement(E.a,{autoFocus:!0,onClick:a,color:"primary"},"Đã biết")))},_e=Object(h.a)((function(e){return{card:{width:340,height:200,padding:"5% auto",margin:"30px 50px"},top:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"20px"},bottom:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20},button:{position:"relative",left:"12px"},delete:{color:ue.a[500]},edit:{color:se.a[500],marginLeft:5},share:{color:de.a[400]},lock:{color:me.a[900]}}}));fe.a.locale("vi");var Ae={shareBoard:function(e){return ye(e,"share")},deleteBoard:function(e){return function(t,a){var n=a().auth.token;return D.a.post("/api/boards/delete",{token:n,id:e}).then((function(a){t(function(e){return{type:"remove_board",payload:e}}(e))})).catch((function(e){return console.log(e)}))}},protectBoard:function(e){return ye(e,"protect")},newName:function(e,t){return ye(e,"name",t)}},Fe=Object(s.b)(null,Ae)((function(e){var t=e.board,a=e.shareBoard,o=e.deleteBoard,c=e.protectBoard,i=e.newName,u=_e(),s=Object(n.useState)(!1),d=m()(s,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=m()(b,2),g=h[0],y=h[1],E=Object(n.useState)(!1),k=m()(E,2),O=k[0],w=k[1],x=Object(n.useRef)(),N="Bạn đã chia sẻ board của bạn thành công khai, board này được chia sẻ với link: https://retro-1712039.herokuapp.com/board/".concat(t.id,". Link đã được copy vào clipboard của bạn");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{className:u.card},r.a.createElement(Q.a,null,r.a.createElement(j.a,{color:"textSecondary",gutterBottom:!0,component:"div"},r.a.createElement("div",{className:u.top},r.a.createElement("div",null,fe()(Number(t.timestamp)).fromNow()),r.a.createElement("div",{className:u.button},r.a.createElement(X.a,{className:u.share,onClick:function(){a(t.id),navigator.clipboard.writeText("https://retro-1712039.herokuapp.com/board/".concat(t.id)).then((function(){return w(!0)}))}},r.a.createElement(re.a,null)),r.a.createElement(X.a,{className:u.lock,onClick:function(){return c(t.id)}},r.a.createElement(ce.a,null)),r.a.createElement(X.a,{className:u.delete,onClick:function(){return y(!0)}},r.a.createElement(ee.a,null))))),p?r.a.createElement(v.a,{label:"Edit board name",placeholder:"Nhập tên mới cho board",fullWidth:!0,multiline:!0,inputRef:x,onBlur:function(){var e=x.current.value;i(t.id,e),f(!1)}}):r.a.createElement(j.a,{variant:"h4",component:"h2",style:{marginTop:20}},t.name,r.a.createElement(X.a,{className:u.edit,onClick:function(){return f(!0)}},r.a.createElement(ae.a,null))),r.a.createElement("div",{className:u.bottom},r.a.createElement("div",null,r.a.createElement(j.a,{color:"textSecondary",style:{marginBot:15}},"Tạo bởi"," ",r.a.createElement("em",null,t.owner)),r.a.createElement(j.a,{color:"textSecondary"},"Chế độ:"," ",r.a.createElement("em",null,"public"===t.permission?"Công khai":"Cá nhân"))),r.a.createElement("div",{className:u.button},r.a.createElement(X.a,{className:u.share,component:l.b,to:"/board/".concat(t.id)},r.a.createElement(le.a,{fontSize:"large"})))))),r.a.createElement(we,{openStatus:g,handleClose:function(){return y(!1)},ifAccept:function(){return o(t.id)}}),r.a.createElement(Be,{openStatus:O,handleClose:function(){return w(!1)},content:N}))})),qe=a("UuMD"),Ue=a("iUGO"),Re=a.n(Ue),ze=Object(h.a)((function(e){return{card:{backgroundColor:"none",border:"6px dashed",borderRadius:"5%",color:qe.a[600],width:380,height:210,padding:"5% auto",textAlign:"center",margin:"30px 50px"},buttonIcon:{width:100,height:100,color:qe.a[600]},typo:{fontWeight:"bold",paddingBottom:"3%"}}})),Me=function(e){var t=ze();return r.a.createElement(Y.a,{className:t.card},r.a.createElement(Q.a,null,r.a.createElement(X.a,{onClick:e.addBoard},r.a.createElement(Re.a,{className:t.buttonIcon})),r.a.createElement(j.a,{variant:"h4",className:t.typo},"Add board")))},Ge=Object(h.a)({mainHeader:{fontWeight:100,fontSize:"4em"},page:{margin:50,marginBottom:80},container:{display:"flex",flexWrap:"wrap"}}),He={add:function(e){return e.timestamp=Date.now(),e.permission="private",function(t,a){var n=a().auth.token;return D.a.post("/api/boards/add",{token:n,board:e}).then((function(e){console.log(e.data),t(function(e){return{type:"add_board",payload:e}}(e.data))})).catch((function(e){return console.log(e)}))}},setBoard:function(){return function(e,t){var a=t().auth.token;return D.a.post("/api/boards/getByToken",{token:a}).then((function(t){e({type:"set_boards",payload:t.data||[]})})).catch((function(e){return console.log(e)}))}}},Je=Object(s.b)((function(e){return{boards:e.boards,user:e.auth.name}}),He)((function(e){var t=Ge(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){e.setBoard().then((function(){return i(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:t.page},r.a.createElement("h1",{className:t.mainHeader},"Chào mừng bạn trở lại, ".concat(e.user)),r.a.createElement(Me,{addBoard:function(){var t={name:"Blank board",owner:e.user};e.add(t)}}),r.a.createElement("div",{className:t.container},e.boards.map((function(e){return r.a.createElement(Fe,{board:e})})))):r.a.createElement(K,null))})),Ke=a("ngQI"),Ze=a("lwsE"),Ve=a.n(Ze),Ye=a("W8MJ"),Qe=a.n(Ye),Xe=a("gFX4"),$e=a.n(Xe),et=new(function(){function e(){Ve()(this,e),this.socket=null}return Qe()(e,[{key:"connect",value:function(e){this.socket=$e.a.connect("https://retro-1712039.herokuapp.com:8000",{query:"boardId="+e})}},{key:"submitTaskList",value:function(e,t){this.socket.emit("send-new-task-list",{task:e,id:t})}},{key:"addTask",value:function(e,t){this.socket&&this.socket.emit("send-add-task-request",{task:e,boardId:t})}},{key:"deleteTask",value:function(e,t){this.socket&&this.socket.emit("send-delete-task-request",{id:e,boardId:t})}},{key:"editTask",value:function(e,t,a){this.socket&&this.socket.emit("send-edit-task-request",{id:e,boardId:t,newInfo:a})}},{key:"submitName",value:function(e,t){this.socket.emit("send-new-board-name",{name:e,id:t})}},{key:"startListenNewTask",value:function(e){this.socket.on("receive-new-task-list",(function(t){e(t)}))}},{key:"startListenNewName",value:function(e){this.socket.on("receive-new-board-name",(function(t){e(t)}))}},{key:"startListenAddTask",value:function(e){this.socket.on("receive-add-task-request",(function(t){e(t)}))}},{key:"startListenDeleteTask",value:function(e){this.socket.on("receive-delete-task-request",(function(t){e(t)}))}},{key:"startListenEditTask",value:function(e){this.socket.on("receive-edit-task-request",(function(t){var a=t.id,n=t.info;e(a,n)}))}},{key:"shutdownWS",value:function(){this.socket.emit("send-disconnect-request"),this.socket=null}}]),e}());var tt=function(e){return{type:"remove_task",payload:{id:e}}},at=function(e){return{type:"add_task",payload:e}},nt=function(e,t){return{type:"update_task",payload:{id:e,task:t}}},rt=function(e){return{type:"set_task",payload:{tasks:e}}},ot=a("6T4/"),ct=a("YoL/"),it=a.n(ct),lt=a("WUv8"),ut=a.n(lt),st=a("mYW3"),dt=a.n(st),mt=[{name:"Went Well",color:se.a[500],icon:r.a.createElement(it.a,null),id:"well"},{name:"To Improve",color:ue.a.A400,icon:r.a.createElement(ut.a,null),id:"improve"},{name:"Action Item",color:ot.a[800],icon:r.a.createElement(dt.a,null),id:"action"}],pt=a("wb2y"),ft=a("bnla"),bt=a.n(ft),ht=a("o4QW"),gt=Object(h.a)({root:{minWidth:"80%",margin:"5% auto"}}),yt={addTask:function(e,t){return function(a,n){e.owner=n().auth.name||"Người dùng ẩn danh",e.position=n().task.filter((function(t){return t.category===e.category})).length,e.id="xyxxyx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),et.addTask(e,t);var r=n().auth.token;return D.a.post("/api/task/add",{token:r,boardId:t,task:e}).then((function(t){a(at(e))})).catch((function(e){return console.log(e)}))}}},Et=Object(s.b)(null,yt)((function(e){var t=e.category,a=e.hide,o=e.addTask,c=e.boardId,i=gt(),l=Object(n.useRef)();return r.a.createElement(Y.a,{className:i.root},r.a.createElement(Q.a,null,r.a.createElement(v.a,{label:"New task",placeholder:"Nhập nội dung task",fullWidth:!0,multiline:!0,inputRef:l})),r.a.createElement(ht.a,null,r.a.createElement(E.a,{variant:"contained",sizes:"small",onClick:function(){var e=l.current.value;a(),o({content:e,category:t,timestamp:Date.now()},c)}},r.a.createElement("b",null,"Add"))))})),vt=a("50B7"),kt=a("FrwU"),Ot=a.n(kt),jt=a("ZuSV"),wt=a.n(jt),xt=Object(h.a)((function(e){return{root:{margin:"5% 2%"},typo:{display:"flex",justifyContent:"space-between",maxWidth:"95%"}}}));fe.a.locale("vi");var Nt={deleteTask:function(e,t){return function(a,n){var r=n().auth.token;return et.deleteTask(e,t),D.a.post("/api/task/delete",{token:r,boardId:t,id:e}).then((function(t){a(tt(e))})).catch((function(e){return console.log(e)}))}},updateTask:function(e,t,a){return function(n,r){var o=r().auth.token;return et.editTask(e,t,a),D.a.post("/api/task/update",{token:o,boardId:t,id:e,newTask:a}).then((function(t){n(nt(e,a))})).catch((function(e){return console.log(e)}))}}},St=Object(s.b)(null,Nt)((function(e){var t=e.task,a=e.updateTask,o=e.deleteTask,c=e.boardId,i=e.index,l=xt(),u=Object(n.useState)(!1),s=m()(u,2),d=s[0],p=s[1],f=Object(n.useRef)();return r.a.createElement(Ke.b,{draggableId:t.id,index:i,key:t.id},(function(e){return r.a.createElement("div",Ne()({},e.dragHandleProps,e.draggableProps,{ref:e.innerRef}),r.a.createElement(Y.a,{className:l.root},r.a.createElement(vt.a,{action:r.a.createElement(X.a,{"aria-label":"settings"},r.a.createElement(wt.a,null)),title:fe()(Number(t.timestamp)).fromNow(),titleTypographyProps:{variant:"body",color:"textSecondary",className:l.typo}}),r.a.createElement(Q.a,null,d?r.a.createElement(v.a,{label:"Edit task",placeholder:"Nhập nội dung mới của task",fullWidth:!0,multiline:!0,inputRef:f,onBlur:function(){return e=f.current.value,t.content=e,a(t.id,c,t),void p(!1);var e}}):r.a.createElement(j.a,{variant:"body1",color:"textPrimary",component:"p"},t.content)),r.a.createElement(ht.a,{disableSpacing:!0,className:l.typo},r.a.createElement("div",null,r.a.createElement(X.a,{onClick:function(){return p(!0)}},r.a.createElement(ae.a,null)),r.a.createElement(X.a,{onClick:function(){return o(t.id,c)}},r.a.createElement(Ot.a,null))),r.a.createElement(j.a,{variant:"body2",color:"textSecondary",component:"p"},t.owner&&r.a.createElement("em",null,"Tạo bởi ".concat(t.owner))))))}))})),Tt=function(e){var t=e.tasks,a=e.category,o=e.boardId,c=Object(n.useState)(!1),i=m()(c,2),l=i[0],u=i[1],s=a.color,d=a.icon,g=a.name,y=a.id,v=function(e){return Object(h.a)((function(t){return{avatarContainer:{display:"flex",alignItems:"center",cursor:"pointer",paddingBottom:"10px"},typo:{paddingLeft:"10px",color:me.a[800],fontWeight:"bold"},colored:{color:"#fff",backgroundColor:e},divider:{marginTop:"3%",color:me.a.A400,height:3},paper:{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary}}}))}(s)();return r.a.createElement(b.a,{item:!0,xs:12,sm:4},r.a.createElement(Ke.c,{droppableId:y,isCombineEnabled:!0},(function(e,a){return r.a.createElement(f.a,Ne()({className:v.paper},e.droppableProps,{ref:e.innerRef}),r.a.createElement("div",{className:v.avatarContainer},r.a.createElement(p.a,{variant:"rounded",className:v.colored},d),r.a.createElement(j.a,{variant:"h6",className:v.typo},g)),r.a.createElement(E.a,{variant:"contained",fullWidth:!0,className:v.colored,onClick:function(){return u(!0)}},r.a.createElement(bt.a,{fontSize:"large"})),(!!t.length||l)&&r.a.createElement(pt.a,{variant:"middle",className:v.divider}),l&&r.a.createElement(Et,{boardId:o,category:y,hide:function(){return u(!1)}}),t.map((function(e,t){return r.a.createElement(St,{task:e,index:t,boardId:o})})),e.placeholder)})))};function Ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(a),!0).forEach((function(t){W()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var It=Object(h.a)((function(e){return{root:{flexGrow:1,justifyContent:"center",padding:"20px 3%"},boardName:{fontWeight:300},icon:{marginLeft:5,color:se.a[600]}}})),Wt=function(e,t){return e.position-t.position},Lt=function(e,t,a,n){return e.droppableId===t.droppableId?n.map((function(a){if(a.category===t.droppableId){if(a.position===e.index)return a.position=t.index,Pt({},a);if(a.position<Math.min(e.index,t.index)||a.position>Math.max(e.index,t.index))return Pt({},a);if(e.index<t.index)return a.position--,Pt({},a);a.position++}return Pt({},a)})):n.map((function(n){return n.id===a?(n.category=t.droppableId,n.position=t.index):n.category===e.droppableId?n.position>e.index&&n.position--:n.category===t.droppableId&&n.position>=t.index&&n.position++,Pt({},n)}))},Dt={newName:function(e,t){return ye(e,"name",t)},setTask:function(e){return function(t,a){var n=a().auth.token;return D.a.post("/api/task/getByBoardId",{token:n,boardId:e}).then((function(e){t(rt(e.data||[]))})).catch((function(e){return new Error("Not your board")}))}},setTaskWServer:function(e,t){return function(a,n){a(rt(t)),et.submitTaskList(t,e);var r=n().auth.token;return D.a.post("/api/task/updateAll",{token:r,boardId:e,newTaskList:t}).then((function(e){})).catch((function(e){return console.log(e)}))}},setTasks:rt,addTask:at,updateTask:nt,deleteTask:tt},Bt=Object(s.b)((function(e){return{task:e.task}}),Dt)((function(e){var t=It(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(""),u=m()(l,2),s=u[0],d=u[1],p=Object(n.useState)(!1),f=m()(p,2),h=f[0],g=f[1],y=Object(n.useState)(!1),E=m()(y,2),k=E[0],O=E[1],w=Object(n.useRef)(),x=e.match.params.id;Object(n.useEffect)((function(){var t=[e.setTask(x),D.a.post("/api/boards/getNameById",{id:x})];return Promise.all(t).then((function(e){e[0]instanceof Error&&O(!0),d(e[1].data.name),g(!0)})).catch((function(e){return console.log(e)})),et.connect(x),et.startListenNewName(d),et.startListenNewTask(e.setTasks),et.startListenAddTask(e.addTask),et.startListenDeleteTask(e.deleteTask),et.startListenEditTask(e.updateTask),function(){et.shutdownWS()}}),[]);return r.a.createElement(Ke.a,{onDragEnd:function(t){var a=t.destination,n=t.source,r=t.draggableId;if(n&&a){var o=Lt(n,a,r,e.task);e.setTaskWServer(x,o)}}},r.a.createElement("div",{className:t.root},h&&!k?r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12,sm:12},c?r.a.createElement(v.a,{label:"Edit board name",placeholder:"Nhập tên mới cho board",fullWidth:!0,multiline:!0,inputRef:w,onBlur:function(){var t=w.current.value;et.submitName(t,x),e.newName(x,t),d(t),i(!1)}}):r.a.createElement(j.a,{variant:"h3",align:"center"},s,r.a.createElement(X.a,{onClick:function(){return i(!0)}},r.a.createElement(ae.a,{fontSize:"large",className:t.icon})))),mt.map((function(t){return r.a.createElement(Tt,{category:t,boardId:x,tasks:e.task.filter((function(e){return e.category===t.id})).sort(Wt)})}))):k?r.a.createElement(j.a,{variant:"h2",align:"center"},"Bạn không có quyền truy cập board này"):r.a.createElement(K,null)))})),_t=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header__title"},e.title),e.subtitle&&r.a.createElement("h2",{className:"header__subtitle"},r.a.createElement(l.b,{to:"/"},e.subtitle))))};_t.defaultProps={title:"Không tìm thấy trang cần tìm",subtitle:"Quay lại trang chủ"};var At=r.a.memo(_t),Ft=a("bXiM"),qt=a("lO0E"),Ut=a("UIhU"),Rt=a.n(Ut),zt=a("WElE"),Mt=a.n(zt),Gt=a("Ti5m"),Ht=a.n(Gt),Jt={logout:function(){return{type:"logout"}}},Kt=Object(s.b)(null,Jt)(Object(u.g)((function(e){return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(E.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(Ht.a,null),onClick:e.user?e.logout:function(){return e.history.push("/login")}},e.user?"Logout":"Login"))}))),Zt=function(e){var t=e.openStatus,a=e.handleClose,o=e.ifAccept,c=Object(n.useRef)();return r.a.createElement("div",null,r.a.createElement(Ee.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(je.a,{id:"alert-dialog-title"},"Thay đổi thông tin cá nhân"),r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{id:"alert-dialog-description"},"Điền thông tin cá nhân của bạn vào các ô phía dưới")),r.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputRef:c,style:{maxWidth:"90%",marginLeft:"5%"}}),r.a.createElement(ve.a,null,r.a.createElement(E.a,{onClick:function(){c.current.value&&o(c.current.value),a()},color:"primary"},"Lưu"),r.a.createElement(E.a,{onClick:a,color:"primary",autoFocus:!0},"Huỷ"))))},Vt=Object(h.a)((function(){return{mainTitle:{flexGrow:1,color:"white",cursor:"pointer",textDecoration:"none"},homeButton:{flex:1,display:"none"}}})),Yt=function(e){var t=Vt(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft.a,{position:"sticky"},r.a.createElement(qt.a,null,r.a.createElement(j.a,{className:t.mainTitle,variant:"h6",color:"inherit",component:l.b,to:"/"},"Retrospected"),r.a.createElement("div",{className:t.homeButton},r.a.createElement(X.a,{color:"inherit","aria-label":"Home"},r.a.createElement(Rt.a,null))),r.a.createElement(Kt,{user:e.isAuthenticated}),e.isAuthenticated&&r.a.createElement(X.a,null,r.a.createElement(Mt.a,{fontSize:"large",style:{color:"white"},onClick:function(){return i(!0)}})))),e.children,r.a.createElement(Zt,{openStatus:c,handleClose:function(){return i(!1)},ifAccept:e.editName}))},Qt={editName:function(e){return function(t,a){var n=a().auth.token;D.a.post("/api/users/edit",{token:n,key:"name",value:e}).then((function(a){t(function(e){return{type:"edit_name",payload:{name:e}}}(e))})).catch((function(e){console.log(e)}))}}},Xt=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.token}}),Qt)(r.a.memo(Yt)),$t=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.token}}))((function(e){return e.isAuthenticated?r.a.createElement(Xt,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:Je,exact:!0}),r.a.createElement(u.b,{path:"/boards",component:Je}),r.a.createElement(u.b,{path:"/board/:id",component:Bt}),r.a.createElement(u.b,{path:"/404",component:At}),r.a.createElement(u.a,{to:"/404"}))):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:M,exact:!0}),r.a.createElement(u.b,{path:"/board/:id",render:function(e){var t=e.match;return r.a.createElement(Xt,null,r.a.createElement(Bt,{match:t}))}}),r.a.createElement(u.b,{path:"/login",component:M,exact:!0}),r.a.createElement(u.b,{path:"/auth/google",component:V}),r.a.createElement(u.b,{path:"/auth/facebook",component:V}),r.a.createElement(u.b,{path:"/404",component:At}),r.a.createElement(u.a,{to:"/404"}))})),ea=a("ANjH"),ta=a("sINF"),aa=a("SVmU"),na=a("oAJy"),ra=a.n(na);function oa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ca(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(a),!0).forEach((function(t){W()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ia=a("RIqP"),la=a.n(ia);function ua(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(a),!0).forEach((function(t){W()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ua(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var da=[];function ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(a),!0).forEach((function(t){W()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ma(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fa=[],ba=Object(ea.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return ca({},t.payload);case"edit_name":return e.name=t.payload.name,ca({},e);case"logout":return{};default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_task":return[].concat(la()(e),[t.payload]);case"set_task":return la()(t.payload.tasks);case"update_task":return e.map((function(e){return e.id===t.payload.id?sa({},t.payload.task):e}));case"remove_task":return e.filter((function(e){return e.id!==t.payload.id}));case"remove_by_cate":return e.filter((function(e){return e.category!==t.payload.category}));case"remove_all_tasks":return da;default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_board":return[].concat(la()(e),[t.payload]);case"set_boards":return la()(t.payload);case"update_board":return e.map((function(e){return e.id===t.payload.id?(e[t.payload.key]=t.payload.value,pa({},e)):e}));case"remove_board":return e.filter((function(e){return e.id!==t.payload}));default:return e}}}),ha={key:"root",whitelist:["auth"],blacklist:["task","boards"],storage:ra.a.createInstance({name:"Retro-data"})},ga=Object(aa.a)(ha,ba),ya=Object(ea.e)(ga,{},Object(ea.a)(ta.a)),Ea=Object(aa.b)(ya),va=a("KMx9"),ka=function(){return r.a.createElement(s.a,{store:ya},r.a.createElement(va.a,{loading:null,persistor:Ea},r.a.createElement(l.a,null,r.a.createElement($t,null))))};c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null),r.a.createElement(ka,null)),document.getElementById("root"))},dKwb:function(e,t,a){var n={"./vi":"KSF8","./vi.js":"KSF8"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="dKwb"},ettg:function(e,t,a){(t=a("JPst")(!1)).push([e.i,'body {\r\n    font: 14px "Century Gothic", Futura, sans-serif;\r\n    margin: 20px;\r\n  }\r\n  \r\n  ol, ul {\r\n    padding-left: 30px;\r\n  }\r\n  \r\n  .board-row:after {\r\n    clear: both;\r\n    content: "";\r\n    display: table;\r\n  }\r\n  \r\n  .status {\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .square {\r\n    background: #fff;\r\n    border: 1px solid #999;\r\n    float: left;\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    line-height: 34px;\r\n    height: 34px;\r\n    margin-right: -1px;\r\n    margin-top: -1px;\r\n    padding: 0;\r\n    text-align: center;\r\n    width: 34px;\r\n  }\r\n  .square-winning {\r\n    border: 3px solid red;\r\n  }\r\n  \r\n  .square:focus {\r\n    outline: none;\r\n  }\r\n  \r\n  .kbd-navigation .square:focus {\r\n    background: #ddd;\r\n  }\r\n  \r\n  .game {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n  \r\n  .game-info {\r\n    margin-left: 20px;\r\n  }\r\n  ',""]),e.exports=t}},[["WJG9",14,6,1,10,13,3,12,11,7,9,2,4,5,8,15]]]);