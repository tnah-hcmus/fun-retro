(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},AzrZ:function(e,t,a){var n=a("LboF"),r=a("ettg");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},WJG9:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("i8i4"),c=a.n(o),i=(a("AzrZ"),a("5CWz")),l=a("55Ip"),u=a("Ty5D"),s=a("/MKj"),d=a("J4zp"),m=a.n(d),p=a("469l"),f=a("kKAo"),b=a("tRbT"),h=a("R/WZ"),g=a("w4+p"),y=a.n(g),E=a("Z3vd"),v=a("r9w1"),k=a("hlie"),O=a("hlFM"),j=a("ofer"),w=function(){return r.a.createElement(j.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",r.a.createElement(k.a,{color:"inherit",href:"https://material-ui.com/"},"My Website")," ",(new Date).getFullYear(),".")},x=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),N=function(e){var t=x(),a=Object(n.useState)("#"),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=m()(l,2),s=u[0],d=u[1];Object(n.useEffect)((function(){e.getGoogleUrl().then((function(e){return i(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,onSubmit:function(t){t.preventDefault();var a=t.target.elements.fname.value.trim()+" "+t.target.elements.lname.value.trim(),n=t.target.elements.password.value.trim(),r=t.target.elements.email.value.trim();e.signup({email:r,password:n,name:a},d,e.history)},noValidate:!0},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{autoComplete:"fname",name:"fname",variant:"outlined",required:!0,fullWidth:!0,id:"fName",label:"First Name",autoFocus:!0})),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lname",label:"Last Name",name:"lname",autoComplete:"lname"})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign Up"),r.a.createElement(E.a,{href:c,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With google"),r.a.createElement(E.a,{href:e.facebookUrl,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Facebook"),!!s&&r.a.createElement(j.a,{variant:"body2",color:"error"},s),r.a.createElement(b.a,{container:!0,justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return e.toLogin(!0)},variant:"body2"},"Already have an account? Sign in"))),r.a.createElement(O.a,{mt:5},r.a.createElement(w,null))))},S=r.a.memo(N),T=a("ZGBi"),I=a("VmPI"),C=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),P=function(e){var t=C(),a=Object(n.useState)("#"),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(null),u=m()(l,2),s=u[0],d=u[1];Object(n.useEffect)((function(){e.getGoogleUrl().then((function(e){return i(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target.elements.email.value,n=t.target.elements.password.value;e.login(a,n,d,e.history)}},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(T.a,{control:r.a.createElement(I.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In"),r.a.createElement(E.a,{href:c,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Google"),r.a.createElement(E.a,{href:e.facebookUrl,fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In With Facebook"),!!s&&r.a.createElement(j.a,{variant:"body2",color:"error"},s),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:!0},r.a.createElement(k.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(b.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return e.toSignUp(!1)},variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(O.a,{mt:5},r.a.createElement(w,null))))},W=r.a.memo(P),L=a("lSNA"),D=a.n(L),B=a("vDqi"),_=a.n(B),A=a("cr+I");function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var q,U=function(e,t){return{type:"login",payload:{token:e,name:t}}},R=function(){return _.a.get("/google/url").then((function(e){return e.data})).catch((function(e){console.log(e)}))},z=(q=A.stringify({client_id:"601715547260365",redirect_uri:"https://retro-1712039.herokuapp.com/auth/facebook",scope:"email",response_type:"code",auth_type:"rerequest",display:"popup"}),"https://www.facebook.com/v8.0/dialog/oauth?".concat(q)),M=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),G=function(e){var t=M(),a=Object(n.useState)(!0),o=m()(a,2),c=o[0],l=o[1];return r.a.createElement(b.a,{container:!0,component:"main",className:t.root},r.a.createElement(i.a,null),r.a.createElement(b.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(b.a,{item:!0,xs:12,sm:8,md:5,component:f.a,elevation:6,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(p.a,{className:t.avatar},r.a.createElement(y.a,null)),c?r.a.createElement(W,{facebookUrl:z,history:e.history,login:e.startLogin,getGoogleUrl:R,toSignUp:l}):r.a.createElement(S,{facebookUrl:z,signup:e.startSignUp,history:e.history,getGoogleUrl:R,toLogin:l}))))},H={startLogin:function(e,t,a,n){return function(r,o){_.a.post("/api/users/login",{email:e,password:t}).then((function(e){var t=e.data,a=t.user,o=t.token;r(U(o,a.name)),n.push("/")})).catch((function(e){console.log(e);var t=e.response&&e.response.data&&e.response.data.error;a(t||e.response.statusText)}))}},startSignUp:function(e,t,a){return function(n,r){_.a.post("/api/users/signup",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)).then((function(e){var t=e.data,r=t.user,o=t.token;n(U(o,r.name)),a.push("/")})).catch((function(e){var a=e.response&&e.response.data&&e.response.data.error;t(a||e.response.statusText)}))}}},J=Object(s.b)(null,H)(Object(u.g)(r.a.memo(G))),K=a("+Isj"),Z=a("iae6"),V=Object(h.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Y=function(){var e=V();return r.a.createElement("div",null,r.a.createElement(K.a,{className:e.backdrop,open:!0},r.a.createElement(Z.a,{color:"inherit"})))},Q=function(e){return Object(n.useEffect)((function(){var t=A.parse(e.location.search),a=e.location.pathname.includes("google")?"Google":"FB";t.error?e.history.push("/"):e.loginThirdParty(a,t.code,e.history)})),r.a.createElement(Y,null)},X={loginThirdParty:function(e,t,a){return function(n,r){_.a.post("/api/users/login".concat(e),{code:t}).then((function(e){var t=e.data,r=t.user,o=t.token;n(U(o,r.name)),a.push("/")})).catch((function(e){console.log(e.response)}))}}},$=Object(s.b)(null,X)(Object(u.g)(r.a.memo(Q))),ee=a("30+C"),te=a("oa/T"),ae=a("PsDL"),ne=a("xMF9"),re=a.n(ne),oe=a("MPUk"),ce=a.n(oe),ie=a("qlJ3"),le=a.n(ie),ue=a("Y0qX"),se=a.n(ue),de=a("L+uM"),me=a.n(de),pe=a("dl/7"),fe=a("6yBS"),be=a("edxh"),he=a("LXXt"),ge=a("wd/R"),ye=a.n(ge),Ee=function(e){return{type:"update_board",payload:{id:e,key:"permission",value:"public"}}},ve=function(e){return{type:"update_board",payload:{id:e,key:"permission",value:"private"}}},ke=function(e,t){return{type:"update_board",payload:{id:e,key:"name",value:t}}},Oe=function(e,t,a){var n={share:{func:Ee,key:"permission",value:"public"},protect:{func:ve,key:"permission",value:"private"},name:{func:ke,key:"name",value:a}}[t],r=n.key,o=n.value,c=n.func;return function(t,n){var i=n().auth.token;return _.a.post("/api/boards/update",{token:i,id:e,key:r,value:o}).then((function(n){t(c(e,a))})).catch((function(e){return console.log(e)}))}},je=a("kfFl"),we=a("+JwS"),xe=a("EQI2"),Ne=a("++HY"),Se=a("yv+Y"),Te=function(e){var t=e.openStatus,a=e.handleClose,n=e.ifAccept,o=e.boardId;return r.a.createElement("div",null,r.a.createElement(je.a,{open:t,onClose:function(){return a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",style:{color:pe.a[700]}},r.a.createElement(Se.a,{id:"alert-dialog-title"},"Bạn thực sự muốn thực hiện hành động này?"),r.a.createElement(xe.a,null,r.a.createElement(Ne.a,{id:"alert-dialog-description"},"Hành động này sẽ xoá vĩnh viễn board của bạn, bạn có chắc là muốn thực hiện nó hay không ?")),r.a.createElement(we.a,null,r.a.createElement(E.a,{onClick:function(){n(o),a(!1)},color:"primary"},"Thực hiện"),r.a.createElement(E.a,{onClick:function(){return a(!1)},color:"primary",autoFocus:!0},"Hoàn tác"))))},Ie=r.a.memo(Te),Ce=a("pVnL"),Pe=a.n(Ce),We=a("QILm"),Le=a.n(We),De=a("H2TA"),Be=a("ZPUd"),_e=a.n(Be),Ae=Object(De.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,o=Le()(e,["children","classes","onClose"]);return r.a.createElement(Se.a,Pe()({disableTypography:!0,className:a.root},o),r.a.createElement(j.a,{variant:"h6"},t),n?r.a.createElement(ae.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(_e.a,null)):null)})),Fe=Object(De.a)((function(e){return{root:{padding:e.spacing(2)}}}))(xe.a),qe=Object(De.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(we.a),Ue=function(e){var t=e.openStatus,a=e.handleClose,n=e.content;return r.a.createElement(je.a,{onClose:function(){return a(!1)},"aria-labelledby":"customized-dialog-title",open:t},r.a.createElement(Ae,{id:"customized-dialog-title",onClose:function(){return a(!1)}},"Thông báo"),r.a.createElement(Fe,{dividers:!0},r.a.createElement(j.a,{gutterBottom:!0},n)),r.a.createElement(qe,null,r.a.createElement(E.a,{autoFocus:!0,onClick:function(){return a(!1)},color:"primary"},"Đã biết")))},Re=r.a.memo(Ue),ze=Object(h.a)((function(e){return{card:{width:340,height:200,padding:"5% auto",margin:"30px 50px"},top:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"20px"},bottom:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20},button:{position:"relative",left:"12px"},delete:{color:pe.a[500]},edit:{color:fe.a[500],marginLeft:5},share:{color:be.a[400]},lock:{color:he.a[900]}}}));ye.a.locale("vi");var Me=function(e){var t=e.board,a=e.shareBoard,o=e.deleteBoard,c=e.protectBoard,i=e.newName,u=ze(),s=Object(n.useState)(!1),d=m()(s,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=m()(b,2),g=h[0],y=h[1],E=Object(n.useState)(!1),k=m()(E,2),O=k[0],w=k[1],x=Object(n.useRef)(),N="Bạn đã chia sẻ board của bạn thành công khai, board này được chia sẻ với link: https://retro-1712039.herokuapp.com/board/".concat(t.id,". Link đã được copy vào clipboard của bạn");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:u.card},r.a.createElement(te.a,null,r.a.createElement(j.a,{color:"textSecondary",gutterBottom:!0,component:"div"},r.a.createElement("div",{className:u.top},r.a.createElement("div",null,ye()(Number(t.timestamp)).fromNow()),r.a.createElement("div",{className:u.button},r.a.createElement(ae.a,{className:u.share,onClick:function(){a(t.id),navigator.clipboard.writeText("https://retro-1712039.herokuapp.com/board/".concat(t.id)).then((function(){return w(!0)}))}},r.a.createElement(le.a,null)),r.a.createElement(ae.a,{className:u.lock,onClick:function(){return c(t.id)}},r.a.createElement(se.a,null)),r.a.createElement(ae.a,{className:u.delete,onClick:function(){return y(!0)}},r.a.createElement(re.a,null))))),p?r.a.createElement(v.a,{label:"Edit board name",placeholder:"Nhập tên mới cho board",fullWidth:!0,multiline:!0,inputRef:x,onBlur:function(){var e=x.current.value;i(t.id,e),f(!1)}}):r.a.createElement(j.a,{variant:"h4",component:"h2",style:{marginTop:20}},t.name,r.a.createElement(ae.a,{className:u.edit,onClick:function(){return f(!0)}},r.a.createElement(ce.a,null))),r.a.createElement("div",{className:u.bottom},r.a.createElement("div",null,r.a.createElement(j.a,{color:"textSecondary",style:{marginBot:15}},"Tạo bởi"," ",r.a.createElement("em",null,t.owner)),r.a.createElement(j.a,{color:"textSecondary"},"Chế độ:"," ",r.a.createElement("em",null,"public"===t.permission?"Công khai":"Cá nhân"))),r.a.createElement("div",{className:u.button},r.a.createElement(ae.a,{className:u.share,component:l.b,to:"/board/".concat(t.id)},r.a.createElement(me.a,{fontSize:"large"})))))),r.a.createElement(Ie,{openStatus:g,handleClose:y,ifAccept:o,boardId:t.id}),r.a.createElement(Re,{openStatus:O,handleClose:w,content:N}))},Ge={shareBoard:function(e){return Oe(e,"share")},deleteBoard:function(e){return function(t,a){var n=a().auth.token;return _.a.post("/api/boards/delete",{token:n,id:e}).then((function(a){t(function(e){return{type:"remove_board",payload:e}}(e))})).catch((function(e){return console.log(e)}))}},protectBoard:function(e){return Oe(e,"protect")},newName:function(e,t){return Oe(e,"name",t)}},He=Object(s.b)(null,Ge)(r.a.memo(Me)),Je=a("UuMD"),Ke=a("iUGO"),Ze=a.n(Ke),Ve=Object(h.a)((function(e){return{card:{backgroundColor:"none",border:"6px dashed",borderRadius:"5%",color:Je.a[600],width:380,height:210,padding:"5% auto",textAlign:"center",margin:"30px 50px"},buttonIcon:{width:100,height:100,color:Je.a[600]},typo:{fontWeight:"bold",paddingBottom:"3%"}}})),Ye=function(e){var t=Ve();return r.a.createElement(ee.a,{className:t.card},r.a.createElement(te.a,null,r.a.createElement(ae.a,{onClick:e.addBoard},r.a.createElement(Ze.a,{className:t.buttonIcon})),r.a.createElement(j.a,{variant:"h4",className:t.typo},"Add board")))},Qe=r.a.memo(Ye),Xe=Object(h.a)({mainHeader:{fontWeight:100,fontSize:"4em"},page:{margin:50,marginBottom:80},container:{display:"flex",flexWrap:"wrap"}}),$e=function(e){var t=Xe(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){e.setBoard().then((function(){return i(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:t.page},r.a.createElement("h1",{className:t.mainHeader},"Chào mừng bạn trở lại, ".concat(e.user)),r.a.createElement(Qe,{addBoard:function(){var t={name:"Blank board",owner:e.user};e.add(t)}}),r.a.createElement("div",{className:t.container},e.boards.map((function(e){return r.a.createElement(He,{board:e})})))):r.a.createElement(Y,null))},et={add:function(e){return e.timestamp=Date.now(),e.permission="private",function(t,a){var n=a().auth.token;return _.a.post("/api/boards/add",{token:n,board:e}).then((function(e){console.log(e.data),t(function(e){return{type:"add_board",payload:e}}(e.data))})).catch((function(e){return console.log(e)}))}},setBoard:function(){return function(e,t){var a=t().auth.token;return _.a.post("/api/boards/getByToken",{token:a}).then((function(t){e({type:"set_boards",payload:t.data||[]})})).catch((function(e){return console.log(e)}))}}},tt=Object(s.b)((function(e){return{boards:e.boards,user:e.auth.name}}),et)(r.a.memo($e)),at=a("ngQI"),nt=a("lwsE"),rt=a.n(nt),ot=a("W8MJ"),ct=a.n(ot),it=a("gFX4"),lt=a.n(it),ut=new(function(){function e(){rt()(this,e),this.socket=null}return ct()(e,[{key:"connect",value:function(e){this.socket=lt.a.connect("https://retro-1712039.herokuapp.com",{query:"boardId="+e,secure:!0})}},{key:"submitTaskList",value:function(e,t){this.socket.emit("send-new-task-list",{task:e,id:t})}},{key:"addTask",value:function(e,t){this.socket&&this.socket.emit("send-add-task-request",{task:e,boardId:t})}},{key:"deleteTask",value:function(e,t){this.socket&&this.socket.emit("send-delete-task-request",{id:e,boardId:t})}},{key:"editTask",value:function(e,t,a){this.socket&&this.socket.emit("send-edit-task-request",{id:e,boardId:t,newInfo:a})}},{key:"submitName",value:function(e,t){this.socket.emit("send-new-board-name",{name:e,id:t})}},{key:"startListenNewTask",value:function(e){this.socket.on("receive-new-task-list",(function(t){e(t)}))}},{key:"startListenNewName",value:function(e){this.socket.on("receive-new-board-name",(function(t){e(t)}))}},{key:"startListenAddTask",value:function(e){this.socket.on("receive-add-task-request",(function(t){e(t)}))}},{key:"startListenDeleteTask",value:function(e){this.socket.on("receive-delete-task-request",(function(t){e(t)}))}},{key:"startListenEditTask",value:function(e){this.socket.on("receive-edit-task-request",(function(t){var a=t.id,n=t.info;e(a,n)}))}},{key:"shutdownWS",value:function(){this.socket.emit("send-disconnect-request"),this.socket=null}}]),e}());var st=function(e){return{type:"remove_task",payload:{id:e}}},dt=function(e){return{type:"add_task",payload:e}},mt=function(e,t){return{type:"update_task",payload:{id:e,task:t}}},pt=function(e){return{type:"set_task",payload:{tasks:e}}},ft=a("6T4/"),bt=a("YoL/"),ht=a.n(bt),gt=a("WUv8"),yt=a.n(gt),Et=a("mYW3"),vt=a.n(Et),kt=[{name:"Went Well",color:fe.a[500],icon:r.a.createElement(ht.a,null),id:"well"},{name:"To Improve",color:pe.a.A400,icon:r.a.createElement(yt.a,null),id:"improve"},{name:"Action Item",color:ft.a[800],icon:r.a.createElement(vt.a,null),id:"action"}],Ot=a("wb2y"),jt=a("bnla"),wt=a.n(jt),xt=a("o4QW"),Nt=Object(h.a)({root:{minWidth:"80%",margin:"5% auto"}}),St=function(e){var t=e.category,a=e.hide,o=e.addTask,c=e.boardId,i=Nt(),l=Object(n.useRef)();return r.a.createElement(ee.a,{className:i.root},r.a.createElement(te.a,null,r.a.createElement(v.a,{label:"New task",placeholder:"Nhập nội dung task",fullWidth:!0,multiline:!0,inputRef:l})),r.a.createElement(xt.a,null,r.a.createElement(E.a,{variant:"contained",sizes:"small",onClick:function(){var e=l.current.value;a(!1),o({content:e,category:t,timestamp:Date.now()},c)}},r.a.createElement("b",null,"Add"))))},Tt={addTask:function(e,t){return function(a,n){e.owner=n().auth.name||"Người dùng ẩn danh",e.position=n().task.filter((function(t){return t.category===e.category})).length,e.id="xyxxyx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),ut.addTask(e,t);var r=n().auth.token;return _.a.post("/api/task/add",{token:r,boardId:t,task:e}).then((function(t){a(dt(e))})).catch((function(e){return console.log(e)}))}}},It=Object(s.b)(null,Tt)(r.a.memo(St)),Ct=a("50B7"),Pt=a("FrwU"),Wt=a.n(Pt),Lt=a("ZuSV"),Dt=a.n(Lt),Bt=Object(h.a)((function(e){return{root:{margin:"5% 2%"},typo:{display:"flex",justifyContent:"space-between",maxWidth:"95%"}}}));ye.a.locale("vi");var _t=function(e){var t=e.task,a=e.updateTask,o=e.deleteTask,c=e.boardId,i=e.index,l=Bt(),u=Object(n.useState)(!1),s=m()(u,2),d=s[0],p=s[1],f=Object(n.useRef)();return r.a.createElement(at.b,{draggableId:t.id,index:i,key:t.id},(function(e){return r.a.createElement("div",Pe()({},e.dragHandleProps,e.draggableProps,{ref:e.innerRef}),r.a.createElement(ee.a,{className:l.root},r.a.createElement(Ct.a,{action:r.a.createElement(ae.a,{"aria-label":"settings"},r.a.createElement(Dt.a,null)),title:ye()(Number(t.timestamp)).fromNow(),titleTypographyProps:{variant:"body",color:"textSecondary",className:l.typo}}),r.a.createElement(te.a,null,d?r.a.createElement(v.a,{label:"Edit task",placeholder:"Nhập nội dung mới của task",fullWidth:!0,multiline:!0,inputRef:f,onBlur:function(){return e=f.current.value,t.content=e,a(t.id,c,t),void p(!1);var e}}):r.a.createElement(j.a,{variant:"body1",color:"textPrimary",component:"p"},t.content)),r.a.createElement(xt.a,{disableSpacing:!0,className:l.typo},r.a.createElement("div",null,r.a.createElement(ae.a,{onClick:function(){return p(!0)}},r.a.createElement(ce.a,null)),r.a.createElement(ae.a,{onClick:function(){return o(t.id,c)}},r.a.createElement(Wt.a,null))),r.a.createElement(j.a,{variant:"body2",color:"textSecondary",component:"p"},t.owner&&r.a.createElement("em",null,"Tạo bởi ".concat(t.owner))))))}))},At={deleteTask:function(e,t){return function(a,n){var r=n().auth.token;return ut.deleteTask(e,t),_.a.post("/api/task/delete",{token:r,boardId:t,id:e}).then((function(t){a(st(e))})).catch((function(e){return console.log(e)}))}},updateTask:function(e,t,a){return function(n,r){var o=r().auth.token;return ut.editTask(e,t,a),_.a.post("/api/task/update",{token:o,boardId:t,id:e,newTask:a}).then((function(t){n(mt(e,a))})).catch((function(e){return console.log(e)}))}}},Ft=Object(s.b)(null,At)(r.a.memo(_t)),qt=function(e){var t=e.tasks,a=e.category,o=e.boardId,c=Object(n.useState)(!1),i=m()(c,2),l=i[0],u=i[1],s=a.color,d=a.icon,g=a.name,y=a.id,v=function(e){return Object(h.a)((function(t){return{avatarContainer:{display:"flex",alignItems:"center",cursor:"pointer",paddingBottom:"10px"},typo:{paddingLeft:"10px",color:he.a[800],fontWeight:"bold"},colored:{color:"#fff",backgroundColor:e},divider:{marginTop:"3%",color:he.a.A400,height:3},paper:{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary}}}))}(s)();return r.a.createElement(b.a,{item:!0,xs:12,sm:4},r.a.createElement(at.c,{droppableId:y,isCombineEnabled:!0},(function(e,a){return r.a.createElement(f.a,Pe()({className:v.paper},e.droppableProps,{ref:e.innerRef}),r.a.createElement("div",{className:v.avatarContainer},r.a.createElement(p.a,{variant:"rounded",className:v.colored},d),r.a.createElement(j.a,{variant:"h6",className:v.typo},g)),r.a.createElement(E.a,{variant:"contained",fullWidth:!0,className:v.colored,onClick:function(){return u(!0)}},r.a.createElement(wt.a,{fontSize:"large"})),(!!t.length||l)&&r.a.createElement(Ot.a,{variant:"middle",className:v.divider}),l&&r.a.createElement(It,{boardId:o,category:y,hide:u}),t.map((function(e,t){return r.a.createElement(Ft,{task:e,index:t,boardId:o})})),e.placeholder)})))},Ut=r.a.memo(qt);function Rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mt=Object(h.a)((function(e){return{root:{flexGrow:1,justifyContent:"center",padding:"20px 3%"},boardName:{fontWeight:300},icon:{marginLeft:5,color:fe.a[600]}}})),Gt=function(e,t){return e.position-t.position},Ht=function(e){var t=Mt(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1],l=Object(n.useState)(""),u=m()(l,2),s=u[0],d=u[1],p=Object(n.useState)(!1),f=m()(p,2),h=f[0],g=f[1],y=Object(n.useState)(!1),E=m()(y,2),k=E[0],O=E[1],w=Object(n.useRef)(),x=e.match.params.id;Object(n.useEffect)((function(){var t=[e.setTask(x),_.a.post("/api/boards/getNameById",{id:x})];return Promise.all(t).then((function(e){e[0]instanceof Error&&O(!0),d(e[1].data.name),g(!0)})).catch((function(e){return console.log(e)})),ut.connect(x),ut.startListenNewName(d),ut.startListenNewTask(e.setTasks),ut.startListenAddTask(e.addTask),ut.startListenDeleteTask(e.deleteTask),ut.startListenEditTask(e.updateTask),function(){ut.shutdownWS()}}),[]);return r.a.createElement(at.a,{onDragEnd:function(t){var a=t.destination,n=t.source,r=t.draggableId;if(n&&a){var o=Jt(n,a,r,e.task);e.setTaskWServer(x,o)}}},r.a.createElement("div",{className:t.root},h&&!k?r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12,sm:12},c?r.a.createElement(v.a,{label:"Edit board name",placeholder:"Nhập tên mới cho board",fullWidth:!0,multiline:!0,inputRef:w,onBlur:function(){var t=w.current.value;ut.submitName(t,x),e.newName(x,t),d(t),i(!1)}}):r.a.createElement(j.a,{variant:"h3",align:"center"},s,r.a.createElement(ae.a,{onClick:function(){return i(!0)}},r.a.createElement(ce.a,{fontSize:"large",className:t.icon})))),kt.map((function(t){return r.a.createElement(Ut,{category:t,boardId:x,tasks:e.task.filter((function(e){return e.category===t.id})).sort(Gt)})}))):k?r.a.createElement(j.a,{variant:"h2",align:"center"},"Bạn không có quyền truy cập board này"):r.a.createElement(Y,null)))},Jt=function(e,t,a,n){return e.droppableId===t.droppableId?n.map((function(a){if(a.category===t.droppableId){if(a.position===e.index)return a.position=t.index,zt({},a);if(a.position<Math.min(e.index,t.index)||a.position>Math.max(e.index,t.index))return zt({},a);if(e.index<t.index)return a.position--,zt({},a);a.position++}return zt({},a)})):n.map((function(n){return n.id===a?(n.category=t.droppableId,n.position=t.index):n.category===e.droppableId?n.position>e.index&&n.position--:n.category===t.droppableId&&n.position>=t.index&&n.position++,zt({},n)}))},Kt={newName:function(e,t){return Oe(e,"name",t)},setTask:function(e){return function(t,a){var n=a().auth.token;return _.a.post("/api/task/getByBoardId",{token:n,boardId:e}).then((function(e){t(pt(e.data||[]))})).catch((function(e){return new Error("Not your board")}))}},setTaskWServer:function(e,t){return function(a,n){a(pt(t)),ut.submitTaskList(t,e);var r=n().auth.token;return _.a.post("/api/task/updateAll",{token:r,boardId:e,newTaskList:t}).then((function(e){})).catch((function(e){return console.log(e)}))}},setTasks:pt,addTask:dt,updateTask:mt,deleteTask:st},Zt=Object(s.b)((function(e){return{task:e.task}}),Kt)(r.a.memo(Ht)),Vt=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header__title"},e.title),e.subtitle&&r.a.createElement("h2",{className:"header__subtitle"},r.a.createElement(l.b,{to:"/"},e.subtitle))))};Vt.defaultProps={title:"Không tìm thấy trang cần tìm",subtitle:"Quay lại trang chủ"};var Yt=r.a.memo(Vt),Qt=a("bXiM"),Xt=a("lO0E"),$t=a("UIhU"),ea=a.n($t),ta=a("WElE"),aa=a.n(ta),na=a("Ti5m"),ra=a.n(na),oa=function(e){return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(E.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(ra.a,null),onClick:e.user?e.logout:function(){return e.history.push("/login")}},e.user?"Logout":"Login"))},ca={logout:function(){return{type:"logout"}}},ia=Object(s.b)(null,ca)(Object(u.g)(r.a.memo(oa))),la=function(e){var t=e.openStatus,a=e.handleClose,o=e.ifAccept,c=(e.boardId,Object(n.useRef)());return r.a.createElement("div",null,r.a.createElement(je.a,{open:t,onClose:function(){return a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Se.a,{id:"alert-dialog-title"},"Thay đổi thông tin cá nhân"),r.a.createElement(xe.a,null,r.a.createElement(Ne.a,{id:"alert-dialog-description"},"Điền thông tin cá nhân của bạn vào các ô phía dưới")),r.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputRef:c,style:{maxWidth:"90%",marginLeft:"5%"}}),r.a.createElement(we.a,null,r.a.createElement(E.a,{onClick:function(){c.current.value&&o(c.current.value),a(!1)},color:"primary"},"Lưu"),r.a.createElement(E.a,{onClick:function(){return a(!1)},color:"primary",autoFocus:!0},"Huỷ"))))},ua=r.a.memo(la),sa=Object(h.a)((function(){return{mainTitle:{flexGrow:1,color:"white",cursor:"pointer",textDecoration:"none"},homeButton:{flex:1,display:"none"}}})),da=function(e){var t=sa(),a=Object(n.useState)(!1),o=m()(a,2),c=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qt.a,{position:"sticky"},r.a.createElement(Xt.a,null,r.a.createElement(j.a,{className:t.mainTitle,variant:"h6",color:"inherit",component:l.b,to:"/"},"Retrospected"),r.a.createElement("div",{className:t.homeButton},r.a.createElement(ae.a,{color:"inherit","aria-label":"Home"},r.a.createElement(ea.a,null))),r.a.createElement(ia,{user:e.isAuthenticated}),e.isAuthenticated&&r.a.createElement(ae.a,null,r.a.createElement(aa.a,{fontSize:"large",style:{color:"white"},onClick:function(){return i(!0)}})))),e.children,r.a.createElement(ua,{openStatus:c,handleClose:i,ifAccept:e.editName}))},ma={editName:function(e){return function(t,a){var n=a().auth.token;_.a.post("/api/users/edit",{token:n,key:"name",value:e}).then((function(a){t(function(e){return{type:"edit_name",payload:{name:e}}}(e))})).catch((function(e){console.log(e)}))}}},pa=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.token}}),ma)(r.a.memo(da)),fa=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.token}}))((function(e){return e.isAuthenticated?r.a.createElement(pa,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:tt,exact:!0}),r.a.createElement(u.b,{path:"/boards",component:tt}),r.a.createElement(u.b,{path:"/board/:id",component:Zt}),r.a.createElement(u.b,{path:"/404",component:Yt}),r.a.createElement(u.a,{to:"/404"}))):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:J,exact:!0}),r.a.createElement(u.b,{path:"/board/:id",render:function(e){var t=e.match;return r.a.createElement(pa,null,r.a.createElement(Zt,{match:t}))}}),r.a.createElement(u.b,{path:"/login",component:J,exact:!0}),r.a.createElement(u.b,{path:"/auth/google",component:$}),r.a.createElement(u.b,{path:"/auth/facebook",component:$}),r.a.createElement(u.b,{path:"/404",component:Yt}),r.a.createElement(u.a,{to:"/404"}))})),ba=a("ANjH"),ha=a("sINF"),ga=a("SVmU"),ya=a("oAJy"),Ea=a.n(ya);function va(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ka(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?va(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):va(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oa=a("RIqP"),ja=a.n(Oa);function wa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Na=[];function Sa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ta(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ia=[],Ca=Object(ba.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return ka({},t.payload);case"edit_name":return e.name=t.payload.name,ka({},e);case"logout":return{};default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_task":return[].concat(ja()(e),[t.payload]);case"set_task":return ja()(t.payload.tasks);case"update_task":return e.map((function(e){return e.id===t.payload.id?xa({},t.payload.task):e}));case"remove_task":return e.filter((function(e){return e.id!==t.payload.id}));case"remove_by_cate":return e.filter((function(e){return e.category!==t.payload.category}));case"remove_all_tasks":return Na;default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_board":return[].concat(ja()(e),[t.payload]);case"set_boards":return ja()(t.payload);case"update_board":return e.map((function(e){return e.id===t.payload.id?(e[t.payload.key]=t.payload.value,Ta({},e)):e}));case"remove_board":return e.filter((function(e){return e.id!==t.payload}));default:return e}}}),Pa={key:"root",whitelist:["auth"],blacklist:["task","boards"],storage:Ea.a.createInstance({name:"Retro-data"})},Wa=Object(ga.a)(Pa,Ca),La=Object(ba.e)(Wa,{},Object(ba.a)(ha.a)),Da=Object(ga.b)(La),Ba=a("KMx9"),_a=function(){return r.a.createElement(s.a,{store:La},r.a.createElement(Ba.a,{loading:null,persistor:Da},r.a.createElement(l.a,null,r.a.createElement(fa,null))))};c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null),r.a.createElement(_a,null)),document.getElementById("root"))},dKwb:function(e,t,a){var n={"./vi":"KSF8","./vi.js":"KSF8"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="dKwb"},ettg:function(e,t,a){(t=a("JPst")(!1)).push([e.i,'body {\r\n    font: 14px "Century Gothic", Futura, sans-serif;\r\n    margin: 20px;\r\n  }\r\n  \r\n  ol, ul {\r\n    padding-left: 30px;\r\n  }\r\n  \r\n  .board-row:after {\r\n    clear: both;\r\n    content: "";\r\n    display: table;\r\n  }\r\n  \r\n  .status {\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .square {\r\n    background: #fff;\r\n    border: 1px solid #999;\r\n    float: left;\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    line-height: 34px;\r\n    height: 34px;\r\n    margin-right: -1px;\r\n    margin-top: -1px;\r\n    padding: 0;\r\n    text-align: center;\r\n    width: 34px;\r\n  }\r\n  .square-winning {\r\n    border: 3px solid red;\r\n  }\r\n  \r\n  .square:focus {\r\n    outline: none;\r\n  }\r\n  \r\n  .kbd-navigation .square:focus {\r\n    background: #ddd;\r\n  }\r\n  \r\n  .game {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n  \r\n  .game-info {\r\n    margin-left: 20px;\r\n  }\r\n  ',""]),e.exports=t}},[["WJG9",14,6,1,10,13,3,12,11,7,9,2,4,5,8,15]]]);